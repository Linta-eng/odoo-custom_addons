<?xml version="1.0" encoding="utf-8"?>

<odoo>
	<record id="stock_picking_view_kanban" model="ir.ui.view">
		<field name="name">Stock Picking</field>
		<field name="model">stock.picking</field>
		<field name="arch" type="xml">
			<kanban default_group_by="route_id" default_order="name" create="0" delete="0" group_create="1">
				<field name="route_id"/>
				<field name="name"/>
				<field name="partner_id"/>
				<field name="location_dest_id"/>
				<field name="state"/>
				<field name="scheduled_date"/>
				<field name="state"/>
				<templates>
					<t t-name="kanban-box">
						<div t-attf-class="oe_kanban_card oe_kanban_global_click">
							<div class="o_kanban_record_top mb8">
								<field name="priority" widget="priority"/>
								<div class="o_kanban_record_headings ml-1">
									<strong class="o_kanban_record_title"><span><t t-esc="record.name.value"/></span>
									</strong>
								</div>
									<strong>
										<field name="state" widget="label_selection" options="{'classes': {'draft': 'default', 'cancel': 'default', 'none': 'danger', 'waiting': 'warning', 'confirmed': 'warning', 'partially_available': 'warning', 'done': 'success'}}"/>
									</strong>
							</div>
							<div class="o_kanban_record_bottom">
								<div class="oe_kanban_bottom_left">
									<t t-esc="record.partner_id.value"/>
									<field name="activity_ids" widget="kanban_activity"/>
									 <field name="json_popover" nolabel="1" widget="stock_rescheduling_popover" attrs="{'invisible': [('json_popover', '=', False)]}"/>
								</div>
								<div class="oe_kanban_bottom_right">
										<t t-esc="record.scheduled_date.value and record.scheduled_date.value.split(' ')[0] or False"/>
								</div>
							</div>
						</div>
					</t>
				</templates>
		   </kanban>
	   </field>
   </record>


	<record model="ir.actions.act_window" id="stock_picking_kanban_action">
		<field name="name">Stock Picking</field>
		<field name="res_model">stock.picking</field>
		<field name="view_mode">tree,form,kanban,search</field>
	</record>


	<menuitem name="Stock" id="stock_picking_menu_root"/>
	<menuitem name="Stock Picking" id="stock_picking_submenu_root" parent="stock_picking_menu_root"
	sequence="1"/>

	<menuitem name="Picking" id="stock_picking" parent="stock_picking_submenu_root"
	action="stock_picking_kanban_action"/>

</odoo>
